[Skip to content](#main-content)

[ ](/)

[Home ](/)[Docs ](/docs/)[Blog ](/blog/)[ Articles ](/articles/)

[Home ](/)[Docs ](/docs/)[Blog ](/blog/)[ Articles ](/articles/)

Extensions

[ Welcome ](/docs/extensions/mv3/)[ What's new in Chrome extensions ](/docs/extensions/whatsnew/)[ Get help with Chrome extensions ](/docs/extensions/gethelp/)Getting Started Guides

[ Welcome ](/docs/extensions/mv3/getstarted/)[ Extensions 101 ](/docs/extensions/mv3/getstarted/extensions-101/)[ Development basics ](/docs/extensions/mv3/getstarted/development-basics/)[ Run scripts on every page ](/docs/extensions/mv3/getstarted/tut-reading-time/)[ Inject scripts into the active tab ](/docs/extensions/mv3/getstarted/tut-focus-mode/)[ Manage tabs ](/docs/extensions/mv3/getstarted/tut-tabs-manager/)

Manifest V3

[ Welcome to Manifest V3 ](/docs/extensions/mv3/intro/)[ Extensions platform vision ](/docs/extensions/mv3/intro/platform-vision/)[ Overview of Manifest V3 ](/docs/extensions/mv3/intro/mv3-overview/)

Overview

[ What are themes? ](/docs/extensions/mv3/themes/)[ Frequently asked questions ](/docs/extensions/mv3/faq/)[ Extensions quality guidelines FAQ ](/docs/extensions/mv3/single%5Fpurpose/)

Migrate from Manifest V2 to Manifest V3

[ Migrate to Manifest V3 ](/docs/extensions/migrating/)[ Manifest V3 migration checklist ](/docs/extensions/migrating/checklist/)[ Update the manifest ](/docs/extensions/migrating/manifest/)[ Migrate to a service worker ](/docs/extensions/migrating/to-service-workers/)[ Update your code ](/docs/extensions/migrating/api-calls/)[ Replace blocking web request listeners ](/docs/extensions/migrating/blocking-web-requests/)[ Improve extension security ](/docs/extensions/migrating/improve-security/)[ Manifest V2 support timeline ](/docs/extensions/migrating/mv2-sunset/)[ Known issues when migrating to Manifest V3 ](/docs/extensions/migrating/known-issues/)

[ API reference ](/docs/extensions/reference/)[ Samples ](https://github.com/GoogleChrome/chrome-extensions-samples)Develop extensions and themes

[ Extension development overview ](/docs/extensions/mv3/devguide/)[ Manifest file format ](/docs/extensions/mv3/manifest/)[ Architecture overview ](/docs/extensions/mv3/architecture-overview/)[ Declare permissions ](/docs/extensions/mv3/declare%5Fpermissions/)[ Design the user interface ](/docs/extensions/mv3/user%5Finterface/)[ Debugging extensions ](/docs/extensions/mv3/tut%5Fdebugging/)[ Samples ](/docs/extensions/mv3/samples/)

In depth: core concepts

[ Message passing ](/docs/extensions/mv3/messaging/)[ Content scripts ](/docs/extensions/mv3/content%5Fscripts/)[ Manage events with service workers ](/docs/extensions/mv3/service%5Fworkers/)[ Match patterns ](/docs/extensions/mv3/match%5Fpatterns/)[ Using promises ](/docs/extensions/mv3/promises/)[ Cross-origin isolation ](/docs/extensions/mv3/cross-origin-isolation/)

In depth: security

[ Cross-origin XMLHttpRequest ](/docs/extensions/mv3/xhr/)[ Using eval in Chrome extensions ](/docs/extensions/mv3/sandboxingEval/)

In depth: more topics

[ Overriding Chrome settings ](/docs/extensions/mv3/settings%5Foverride/)[ Extending DevTools ](/docs/extensions/mv3/devtools/)[ Fetching favicons ](/docs/extensions/mv3/favicon/)[ OAuth2: Authenticate users with Google ](/docs/extensions/mv3/tut%5Foauth/)[ Overriding Chrome pages ](/docs/extensions/mv3/override/)[ Rich notifications API ](/docs/extensions/mv3/richNotifications/)[ Native messaging ](/docs/extensions/mv3/nativeMessaging/)

Best practices

[ Protect user privacy ](/docs/extensions/mv3/user%5Fprivacy/)[ Declare permissions and warn users ](/docs/extensions/mv3/permission%5Fwarnings/)[ Stay secure ](/docs/extensions/mv3/security/)[ Accessibility (a11y) ](/docs/extensions/mv3/a11y/)[ Localization message formats ](/docs/extensions/mv3/i18n-messages/)[ Give users options ](/docs/extensions/mv3/options/)

Distributing your extensions

[ Extension hosting ](/docs/extensions/mv3/hosting/)[ Alternative extension installation methods ](/docs/extensions/mv3/external%5Fextensions/)[ Installing extensions on Linux ](/docs/extensions/mv3/linux%5Fhosting/)[ Tutorial: Google analytics ](/docs/extensions/mv3/tut%5Fanalytics/)

Manifest V2

[ About Manifest V2 ](/docs/extensions/mv2/)[ Getting started ](/docs/extensions/mv2/getstarted/)Overview

[ What are extensions? ](/docs/extensions/mv2/overview/)[ What are themes? ](/docs/extensions/mv2/themes/)[ Frequently asked questions ](/docs/extensions/mv2/faq/)

Develop extensions and themes

[ Extension development overview ](/docs/extensions/mv2/devguide/)[ Manifest file format ](/docs/extensions/mv2/manifest/)[ Architecture overview ](/docs/extensions/mv2/architecture-overview/)[ Declare permissions ](/docs/extensions/mv2/declare%5Fpermissions/)[ Design the user interface ](/docs/extensions/mv2/user%5Finterface/)[ Debugging extensions ](/docs/extensions/mv2/tut%5Fdebugging/)[ Samples ](/docs/extensions/mv2/samples/)

In depth: core concepts

[ Message passing ](/docs/extensions/mv2/messaging/)[ Content scripts ](/docs/extensions/mv2/content%5Fscripts/)[ Manage events with background scripts ](/docs/extensions/mv2/background%5Fpages/)[ Match patterns ](/docs/extensions/mv2/match%5Fpatterns/)[ Cross-origin isolation ](/docs/extensions/mv2/cross-origin-isolation/)

In depth: security

[ Cross-origin XMLHttpRequest ](/docs/extensions/mv2/xhr/)[ Using eval in Chrome extensions ](/docs/extensions/mv2/sandboxingEval/)

In depth: more topics

[ Overriding Chrome settings ](/docs/extensions/mv2/settings%5Foverride/)[ Extending DevTools ](/docs/extensions/mv2/devtools/)[ OAuth2: Authenticate users with Google ](/docs/extensions/mv2/tut%5Foauth/)[ Overriding Chrome pages ](/docs/extensions/mv2/override/)[ Rich notifications API ](/docs/extensions/mv2/richNotifications/)

Best practices

[ Protect user privacy ](/docs/extensions/mv2/user%5Fprivacy/)[ Declare permissions and warn users ](/docs/extensions/mv2/permission%5Fwarnings/)[ Stay secure ](/docs/extensions/mv2/security/)[ Accessibility (a11y) ](/docs/extensions/mv2/a11y/)[ Localization message formats ](/docs/extensions/mv2/i18n-messages/)[ Give users options ](/docs/extensions/mv2/options/)

Distributing your extensions

[ Chrome Web Store ](/docs/extensions/mv2/hosting/)[ Alternative extension distribution options ](/docs/extensions/mv2/external%5Fextensions/)[ Installing extensions on Linux ](/docs/extensions/mv2/linux%5Fhosting/)[ Tutorial: Google analytics ](/docs/extensions/mv2/tut%5Fanalytics/)

Table of contents

* [Manifest](#manifest)
* [Parts of the UI](#parts-of-the-ui)  
   * [Icon](#icon)  
   * [Tooltip (title)](#tooltip-title)  
   * [Badge](#badge)  
   * [Popup](#popup)
* [Per-tab state](#per-tab-state)
* [Enabled state](#enabled-state)
* [Examples](#examples)  
   * [Show a popup](#show-a-popup)  
   * [Injecting a content script on click](#injecting-a-content-script-on-click)  
   * [Emulating pageActions with declarativeContent](#emulating-pageactions-with-declarativecontent)
* [Types](#type)  
   * [OpenPopupOptions](#type-OpenPopupOptions)  
   * [TabDetails](#type-TabDetails)  
   * [UserSettings](#type-UserSettings)
* [Methods](#method)  
   * [disable](#method-disable)  
   * [enable](#method-enable)  
   * [getBadgeBackgroundColor](#method-getBadgeBackgroundColor)  
   * [getBadgeText](#method-getBadgeText)  
   * [getBadgeTextColor](#method-getBadgeTextColor)  
   * [getPopup](#method-getPopup)  
   * [getTitle](#method-getTitle)  
   * [getUserSettings](#method-getUserSettings)  
   * [isEnabled](#method-isEnabled)  
   * [openPopup](#method-openPopup)  
   * [setBadgeBackgroundColor](#method-setBadgeBackgroundColor)  
   * [setBadgeText](#method-setBadgeText)  
   * [setBadgeTextColor](#method-setBadgeTextColor)  
   * [setIcon](#method-setIcon)  
   * [setPopup](#method-setPopup)  
   * [setTitle](#method-setTitle)
* [Events](#event)  
   * [onClicked](#event-onClicked)

The Chrome team is back at Google I/O on May 10!

[ Register now ](https://io.google/2023/?utm%5Fsource=chrome&utm%5Fmedium=embedded%5Fmarketing&utm%5Fcampaign=hpp%5Freg%5Fbanner&utm%5Fcontent=)Dismiss

[Documentation](../../..) [Extensions](../..) [API reference](..)

Extensions

[ Welcome ](/docs/extensions/mv3/)[ What's new in Chrome extensions ](/docs/extensions/whatsnew/)[ Get help with Chrome extensions ](/docs/extensions/gethelp/)Getting Started Guides

[ Welcome ](/docs/extensions/mv3/getstarted/)[ Extensions 101 ](/docs/extensions/mv3/getstarted/extensions-101/)[ Development basics ](/docs/extensions/mv3/getstarted/development-basics/)[ Run scripts on every page ](/docs/extensions/mv3/getstarted/tut-reading-time/)[ Inject scripts into the active tab ](/docs/extensions/mv3/getstarted/tut-focus-mode/)[ Manage tabs ](/docs/extensions/mv3/getstarted/tut-tabs-manager/)

Manifest V3

[ Welcome to Manifest V3 ](/docs/extensions/mv3/intro/)[ Extensions platform vision ](/docs/extensions/mv3/intro/platform-vision/)[ Overview of Manifest V3 ](/docs/extensions/mv3/intro/mv3-overview/)

Overview

[ What are themes? ](/docs/extensions/mv3/themes/)[ Frequently asked questions ](/docs/extensions/mv3/faq/)[ Extensions quality guidelines FAQ ](/docs/extensions/mv3/single%5Fpurpose/)

Migrate from Manifest V2 to Manifest V3

[ Migrate to Manifest V3 ](/docs/extensions/migrating/)[ Manifest V3 migration checklist ](/docs/extensions/migrating/checklist/)[ Update the manifest ](/docs/extensions/migrating/manifest/)[ Migrate to a service worker ](/docs/extensions/migrating/to-service-workers/)[ Update your code ](/docs/extensions/migrating/api-calls/)[ Replace blocking web request listeners ](/docs/extensions/migrating/blocking-web-requests/)[ Improve extension security ](/docs/extensions/migrating/improve-security/)[ Manifest V2 support timeline ](/docs/extensions/migrating/mv2-sunset/)[ Known issues when migrating to Manifest V3 ](/docs/extensions/migrating/known-issues/)

[ API reference ](/docs/extensions/reference/)[ Samples ](https://github.com/GoogleChrome/chrome-extensions-samples)Develop extensions and themes

[ Extension development overview ](/docs/extensions/mv3/devguide/)[ Manifest file format ](/docs/extensions/mv3/manifest/)[ Architecture overview ](/docs/extensions/mv3/architecture-overview/)[ Declare permissions ](/docs/extensions/mv3/declare%5Fpermissions/)[ Design the user interface ](/docs/extensions/mv3/user%5Finterface/)[ Debugging extensions ](/docs/extensions/mv3/tut%5Fdebugging/)[ Samples ](/docs/extensions/mv3/samples/)

In depth: core concepts

[ Message passing ](/docs/extensions/mv3/messaging/)[ Content scripts ](/docs/extensions/mv3/content%5Fscripts/)[ Manage events with service workers ](/docs/extensions/mv3/service%5Fworkers/)[ Match patterns ](/docs/extensions/mv3/match%5Fpatterns/)[ Using promises ](/docs/extensions/mv3/promises/)[ Cross-origin isolation ](/docs/extensions/mv3/cross-origin-isolation/)

In depth: security

[ Cross-origin XMLHttpRequest ](/docs/extensions/mv3/xhr/)[ Using eval in Chrome extensions ](/docs/extensions/mv3/sandboxingEval/)

In depth: more topics

[ Overriding Chrome settings ](/docs/extensions/mv3/settings%5Foverride/)[ Extending DevTools ](/docs/extensions/mv3/devtools/)[ Fetching favicons ](/docs/extensions/mv3/favicon/)[ OAuth2: Authenticate users with Google ](/docs/extensions/mv3/tut%5Foauth/)[ Overriding Chrome pages ](/docs/extensions/mv3/override/)[ Rich notifications API ](/docs/extensions/mv3/richNotifications/)[ Native messaging ](/docs/extensions/mv3/nativeMessaging/)

Best practices

[ Protect user privacy ](/docs/extensions/mv3/user%5Fprivacy/)[ Declare permissions and warn users ](/docs/extensions/mv3/permission%5Fwarnings/)[ Stay secure ](/docs/extensions/mv3/security/)[ Accessibility (a11y) ](/docs/extensions/mv3/a11y/)[ Localization message formats ](/docs/extensions/mv3/i18n-messages/)[ Give users options ](/docs/extensions/mv3/options/)

Distributing your extensions

[ Extension hosting ](/docs/extensions/mv3/hosting/)[ Alternative extension installation methods ](/docs/extensions/mv3/external%5Fextensions/)[ Installing extensions on Linux ](/docs/extensions/mv3/linux%5Fhosting/)[ Tutorial: Google analytics ](/docs/extensions/mv3/tut%5Fanalytics/)

Manifest V2

[ About Manifest V2 ](/docs/extensions/mv2/)[ Getting started ](/docs/extensions/mv2/getstarted/)Overview

[ What are extensions? ](/docs/extensions/mv2/overview/)[ What are themes? ](/docs/extensions/mv2/themes/)[ Frequently asked questions ](/docs/extensions/mv2/faq/)

Develop extensions and themes

[ Extension development overview ](/docs/extensions/mv2/devguide/)[ Manifest file format ](/docs/extensions/mv2/manifest/)[ Architecture overview ](/docs/extensions/mv2/architecture-overview/)[ Declare permissions ](/docs/extensions/mv2/declare%5Fpermissions/)[ Design the user interface ](/docs/extensions/mv2/user%5Finterface/)[ Debugging extensions ](/docs/extensions/mv2/tut%5Fdebugging/)[ Samples ](/docs/extensions/mv2/samples/)

In depth: core concepts

[ Message passing ](/docs/extensions/mv2/messaging/)[ Content scripts ](/docs/extensions/mv2/content%5Fscripts/)[ Manage events with background scripts ](/docs/extensions/mv2/background%5Fpages/)[ Match patterns ](/docs/extensions/mv2/match%5Fpatterns/)[ Cross-origin isolation ](/docs/extensions/mv2/cross-origin-isolation/)

In depth: security

[ Cross-origin XMLHttpRequest ](/docs/extensions/mv2/xhr/)[ Using eval in Chrome extensions ](/docs/extensions/mv2/sandboxingEval/)

In depth: more topics

[ Overriding Chrome settings ](/docs/extensions/mv2/settings%5Foverride/)[ Extending DevTools ](/docs/extensions/mv2/devtools/)[ OAuth2: Authenticate users with Google ](/docs/extensions/mv2/tut%5Foauth/)[ Overriding Chrome pages ](/docs/extensions/mv2/override/)[ Rich notifications API ](/docs/extensions/mv2/richNotifications/)

Best practices

[ Protect user privacy ](/docs/extensions/mv2/user%5Fprivacy/)[ Declare permissions and warn users ](/docs/extensions/mv2/permission%5Fwarnings/)[ Stay secure ](/docs/extensions/mv2/security/)[ Accessibility (a11y) ](/docs/extensions/mv2/a11y/)[ Localization message formats ](/docs/extensions/mv2/i18n-messages/)[ Give users options ](/docs/extensions/mv2/options/)

Distributing your extensions

[ Chrome Web Store ](/docs/extensions/mv2/hosting/)[ Alternative extension distribution options ](/docs/extensions/mv2/external%5Fextensions/)[ Installing extensions on Linux ](/docs/extensions/mv2/linux%5Fhosting/)[ Tutorial: Google analytics ](/docs/extensions/mv2/tut%5Fanalytics/)

Table of contents

* [Manifest](#manifest)
* [Parts of the UI](#parts-of-the-ui)  
   * [Icon](#icon)  
   * [Tooltip (title)](#tooltip-title)  
   * [Badge](#badge)  
   * [Popup](#popup)
* [Per-tab state](#per-tab-state)
* [Enabled state](#enabled-state)
* [Examples](#examples)  
   * [Show a popup](#show-a-popup)  
   * [Injecting a content script on click](#injecting-a-content-script-on-click)  
   * [Emulating pageActions with declarativeContent](#emulating-pageactions-with-declarativecontent)
* [Types](#type)  
   * [OpenPopupOptions](#type-OpenPopupOptions)  
   * [TabDetails](#type-TabDetails)  
   * [UserSettings](#type-UserSettings)
* [Methods](#method)  
   * [disable](#method-disable)  
   * [enable](#method-enable)  
   * [getBadgeBackgroundColor](#method-getBadgeBackgroundColor)  
   * [getBadgeText](#method-getBadgeText)  
   * [getBadgeTextColor](#method-getBadgeTextColor)  
   * [getPopup](#method-getPopup)  
   * [getTitle](#method-getTitle)  
   * [getUserSettings](#method-getUserSettings)  
   * [isEnabled](#method-isEnabled)  
   * [openPopup](#method-openPopup)  
   * [setBadgeBackgroundColor](#method-setBadgeBackgroundColor)  
   * [setBadgeText](#method-setBadgeText)  
   * [setBadgeTextColor](#method-setBadgeTextColor)  
   * [setIcon](#method-setIcon)  
   * [setPopup](#method-setPopup)  
   * [setTitle](#method-setTitle)
* [Events](#event)  
   * [onClicked](#event-onClicked)

# chrome.action

* Description  
Use the `chrome.action` API to control the extension's icon in the Google Chrome toolbar.
* Manifest Keys  
The following keys must be declared [in the manifest](/docs/extensions/mv3/manifest/) to use this API.  
`action`
* Availability  
 Chrome 88+  MV3+

Table of contents

* [Manifest](#manifest)
* [Parts of the UI](#parts-of-the-ui)  
   * [Icon](#icon)  
   * [Tooltip (title)](#tooltip-title)  
   * [Badge](#badge)  
   * [Popup](#popup)
* [Per-tab state](#per-tab-state)
* [Enabled state](#enabled-state)
* [Examples](#examples)  
   * [Show a popup](#show-a-popup)  
   * [Injecting a content script on click](#injecting-a-content-script-on-click)  
   * [Emulating pageActions with declarativeContent](#emulating-pageactions-with-declarativecontent)
* [Types](#type)  
   * [OpenPopupOptions](#type-OpenPopupOptions)  
   * [TabDetails](#type-TabDetails)  
   * [UserSettings](#type-UserSettings)
* [Methods](#method)  
   * [disable](#method-disable)  
   * [enable](#method-enable)  
   * [getBadgeBackgroundColor](#method-getBadgeBackgroundColor)  
   * [getBadgeText](#method-getBadgeText)  
   * [getBadgeTextColor](#method-getBadgeTextColor)  
   * [getPopup](#method-getPopup)  
   * [getTitle](#method-getTitle)  
   * [getUserSettings](#method-getUserSettings)  
   * [isEnabled](#method-isEnabled)  
   * [openPopup](#method-openPopup)  
   * [setBadgeBackgroundColor](#method-setBadgeBackgroundColor)  
   * [setBadgeText](#method-setBadgeText)  
   * [setBadgeTextColor](#method-setBadgeTextColor)  
   * [setIcon](#method-setIcon)  
   * [setPopup](#method-setPopup)  
   * [setTitle](#method-setTitle)
* [Events](#event)  
   * [onClicked](#event-onClicked)

You can use the `chrome.action` API to control the toolbar button for your extension in Chrome's UI. The action icons are displayed in the browser toolbar, to the right of the omnibox (on left-to-right devices). After installation, by default, these appear in the extensions menu (the puzzle piece). Users can choose to pin your extension icon to the toolbar.

Note that every extension will have an icon in the toolbar in Chrome, even if the `action` key is not specified.

## [#](#manifest) Manifest

In order to use the `chrome.action` API, you need to specify a `"manifest_version"` of `3` or higher and include the `action` key in your [manifest file](/docs/extensions/mv3/manifest/).

```json
{
  "name": "Action Extension",
  ...
  "action": {
    "default_icon": {              // optional
      "16": "images/icon16.png",   // optional
      "24": "images/icon24.png",   // optional
      "32": "images/icon32.png"    // optional
    },
    "default_title": "Click Me",   // optional, shown in tooltip
    "default_popup": "popup.html"  // optional
  },
  ...
}
```

Each of these values is optional; an empty dictionary is technically allowed.

These properties are described more below.

## [#](#parts-of-the-ui) Parts of the UI

### [#](#icon) Icon

The icon is the main image used in the toolbar button. Icons are 16 DIPs (device-independent pixels) wide and tall. The icon is initially set by the `default_icon` key in the `action` entry in the `manifest.json` file. This key is a dictionary of sizes to image paths. Chrome will use these icons to choose which image scale to use. If an exact match is not found, Chrome will select the closest available and scale it to fit the image. However, this scaling can cause the icon to lose detail or look fuzzy.

Since devices with less-common scale factors like 1.5x or 1.2x are becoming more common, you are encouraged to provide multiple sizes for your icons. This also ensures that if the icon display size is ever changed, you don't need to do any more work to provide different icons.

The icon can also be set programmatically using the `action.setIcon()` method. This can be used to specify a different image path or to provide a dynamically-generated icon using the [HTML canvas element](https://developer.mozilla.org/docs/Web/API/HTMLCanvasElement), or, if setting from an extension service worker, the [offscreen canvas](https://developer.mozilla.org/docs/Web/API/OffscreenCanvas) API.

```js
const canvas = new OffscreenCanvas(16, 16);
const context = canvas.getContext('2d');
context.clearRect(0, 0, 16, 16);
context.fillStyle = '#00FF00';  // Green
context.fillRect(0, 0, 16, 16);
const imageData = context.getImageData(0, 0, 16, 16);
chrome.action.setIcon({imageData: imageData}, () => { /* ... */ });
```

The `action.setIcon()` API is intended to set a static image. It should not be used to simulate animation.

#### [#](#formats) Formats

For packed extensions (installed from a .crx file), images can be in most formats that the Blink rendering engine can display, including PNG, JPEG, BMP, ICO, and others (SVG is not supported). Unpacked extensions must use images in the PNG format.

### [#](#tooltip-title) Tooltip (title)

The tooltip, or title, appears when the user hovers the mouse on the extension's icon in the toolbar. It is also included in the accessible text spoken by screenreaders when the button gets focus.

The default tooltip is set from the `default_title` field of the `action` object in `manifest.json`. You can also set it programmatically with the `action.setTitle()` method.

### [#](#badge) Badge

Actions can optionally display a "badge" â€” a bit of text layered over the icon. This makes it easy to update the action to display a small amount of information about the state of the extension, such as a counter. The badge has a text component and a background color.

Note that the badge has limited space, and should typically use four characters or fewer.

The badge does not have a default taken from the manifest; you can set it programmatically with `action.setBadgeBackgroundColor()` and `action.setBadgeText()`. When setting the color, the values can be either an array of four integers between 0 and 255 that make up the RGBA color of the badge or a string with a [CSS color](https://developer.mozilla.org/docs/Web/CSS/color) value.

```js
chrome.action.setBadgeBackgroundColor(
  {color: [0, 255, 0, 0]},  // Green
  () => { /* ... */ },
);

chrome.action.setBadgeBackgroundColor(
  {color: '#00FF00'},  // Also green
  () => { /* ... */ },
);

chrome.action.setBadgeBackgroundColor(
  {color: 'green'},  // Also, also green
  () => { /* ... */ },
);
```

### [#](#popup) Popup

An action's popup will be shown when the user clicks on the extension's action button in the toolbar. The popup can contain any HTML contents you like, and will be automatically sized to fit its contents. The popup cannot be smaller than 25x25 and cannot be larger than 800x600.

The popup is initially set from the `default_popup` property in the `action` key in the `manifest.json` file. If present, this should point to a relative path within the extension directory. It can also be updated dynamically to point to a different relative path using the `action.setPopup()` method.

The `action.onClicked` event will not be dispatched if the extension action has specified a popup to show on click on the current tab.

## [#](#per-tab-state) Per-tab state

Extension actions can have different states for each tab. For instance, you could set the badge text to be different on each tab (to show tab-specific state). You can set the value for an individual tab using the `tabId` property in the various setting methods on the `action` API. For instance, to set the badge text on a specific tab, you would do something like the following:

```js
function getTabId() { /* ... */}
function getTabBadge() { /* ... */}

chrome.action.setBadgeText(
  {
    text: getTabBadge(tabId),
    tabId: getTabId(),
  },
  () => { ... }
);
```

If the `tabId` property is omitted, the setting is treated as a global setting. Tab-specific settings take priority over any global settings.

## [#](#enabled-state) Enabled state

By default, toolbar actions are enabled (clickable) on every tab. You can control this using the `action.enable()` and `action.disable()` methods. This only affects whether the popup (if any) or `action.onClicked` event is dispatched to your extension; it does not affect the action's presence in the toolbar.

## [#](#examples) Examples

The following examples show some common ways that actions are used in extensions. For a more robust demonstration of action capabilities, see the [Action API example](https://github.com/GoogleChrome/chrome-extensions-samples/tree/main/api-samples/action) in the [chrome-extension-samples](https://github.com/GoogleChrome/chrome-extensions-samples) repository.

### [#](#show-a-popup) Show a popup

It's common for an extension to display a popup when the user clicks the extension's action. To implement this in your own extension, declare the popup in your `manifest.json` and specify the content that Chrome should display in the popup.

```json
// manifest.json
{
  "name": "Action popup demo",
  "version": "1.0",
  "manifest_version": 3,
  "action": {
    "default_title": "Click to view a popup",
    "default_popup": "popup.html"
  }
}
```

```html
<!-- popup.html -->
<!DOCTYPE html>
<html>
<head>
  <style>
    html {
      min-height: 5em;
      min-width: 10em;
      background: salmon;
    }
  </style>
</head>
<body>
  <p>Hello, world!</p>
</body>
</html>
```

### [#](#injecting-a-content-script-on-click) Injecting a content script on click

A common pattern for extensions is to expose their primary functionality using the extension's action. The example below demonstrates this pattern. When the user clicks the action, the extension injects a content script into the current page. The content script then displays an alert to verify that everything worked as expected.

```json
// manifest.json
{
  "name": "Action script injection demo",
  "version": "1.0",
  "manifest_version": 3,
  "action": {
    "default_title": "Click to show an alert"
  },
  "permissions": ["activeTab", "scripting"],
  "background": {
    "service_worker": "background.js"
  }
}
```

```js
// background.js
chrome.action.onClicked.addListener((tab) => {
  chrome.scripting.executeScript({
    target: {tabId: tab.id},
    files: ['content.js']
  });
});
```

```js
// content.js
alert('Hello, world!');
```

### [#](#emulating-pageactions-with-declarativecontent) Emulating pageActions with declarativeContent

The chrome.action API replaced the [browserAction](/docs/extensions/reference/browserAction/) and [pageAction](/docs/extensions/reference/pageAction/) APIs in Manifest V3\. By default, actions are similar to browser actions, but it is possible to emulate the behavior of a page action using the action API.

This example shows how an extension's background logic can (a) disable the action by default and (b) use [declarativeContent](/docs/extensions/reference/declarativeContent/) to enable the action on specific sites.

```js
// background.js

// Wrap in an onInstalled callback in order to avoid unnecessary work
// every time the background script is run
chrome.runtime.onInstalled.addListener(() => {
  // Page actions are disabled by default and enabled on select tabs
  chrome.action.disable();

  // Clear all rules to ensure only our expected rules are set
  chrome.declarativeContent.onPageChanged.removeRules(undefined, () => {
    // Declare a rule to enable the action on example.com pages
    let exampleRule = {
      conditions: [
        new chrome.declarativeContent.PageStateMatcher({
          pageUrl: {hostSuffix: '.example.com'},
        })
      ],
      actions: [new chrome.declarativeContent.ShowAction()],
    };

    // Finally, apply our new array of rules
    let rules = [exampleRule];
    chrome.declarativeContent.onPageChanged.addRules(rules);
  });
});
```

## Summary

* Types  
[OpenPopupOptions](#type-OpenPopupOptions)  
[TabDetails](#type-TabDetails)  
[UserSettings](#type-UserSettings)
* Methods  
[disable](#method-disable)  
[enable](#method-enable)  
[getBadgeBackgroundColor](#method-getBadgeBackgroundColor)  
[getBadgeText](#method-getBadgeText)  
[getBadgeTextColor](#method-getBadgeTextColor)  
[getPopup](#method-getPopup)  
[getTitle](#method-getTitle)  
[getUserSettings](#method-getUserSettings)  
[isEnabled](#method-isEnabled)  
[openPopup](#method-openPopup)  
[setBadgeBackgroundColor](#method-setBadgeBackgroundColor)  
[setBadgeText](#method-setBadgeText)  
[setBadgeTextColor](#method-setBadgeTextColor)  
[setIcon](#method-setIcon)  
[setPopup](#method-setPopup)  
[setTitle](#method-setTitle)
* Events  
[onClicked](#event-onClicked)

## Types

### OpenPopupOptions

 Chrome 99+ 

#### Properties

* windowId  
number optional  
The id of the window to open the action popup in. Defaults to the currently-active window if unspecified.

### TabDetails

#### Properties

* tabId  
number optional  
The ID of the tab to query state for. If no tab is specified, the non-tab-specific state is returned.

### UserSettings

 Chrome 91+ 

The collection of user-specified settings relating to an extension's action.

#### Properties

* isOnToolbar  
boolean  
Whether the extension's action icon is visible on browser windows' top-level toolbar (i.e., whether the extension has been 'pinned' by the user).

## Methods

### disable

` chrome.action.disable(  
 tabId?:number,  
 callback?:function,  
 )`

 Promise 

Disables the action for a tab.

#### Parameters

* tabId  
number optional  
The id of the tab for which you want to modify the action.
* callback  
function optional  
The `callback` parameter looks like: ` () => void`

#### Returns

* Promise<void>  
Promises are supported in Manifest V3 and later, but callbacks are provided for backward compatibility. You cannot use both on the same function call. The promise resolves with the same type that is passed to the callback.

### enable

` chrome.action.enable(  
 tabId?:number,  
 callback?:function,  
 )`

 Promise 

Enables the action for a tab. By default, actions are enabled.

#### Parameters

* tabId  
number optional  
The id of the tab for which you want to modify the action.
* callback  
function optional  
The `callback` parameter looks like: ` () => void`

#### Returns

* Promise<void>  
Promises are supported in Manifest V3 and later, but callbacks are provided for backward compatibility. You cannot use both on the same function call. The promise resolves with the same type that is passed to the callback.

### getBadgeBackgroundColor

` chrome.action.getBadgeBackgroundColor(  
 details:[TabDetails](#type-TabDetails),  
 callback?:function,  
 )`

 Promise 

Gets the background color of the action.

#### Parameters

* details  
[TabDetails](#type-TabDetails)
* callback  
function optional  
The `callback` parameter looks like: ` (result:[ColorArray](../browserAction/#type-ColorArray)) => void`  
   * result  
   [ColorArray](../browserAction/#type-ColorArray)

#### Returns

* Promise<[browserAction.ColorArray](../browserAction/#type-ColorArray)\>  
Promises are supported in Manifest V3 and later, but callbacks are provided for backward compatibility. You cannot use both on the same function call. The promise resolves with the same type that is passed to the callback.

### getBadgeText

` chrome.action.getBadgeText(  
 details:[TabDetails](#type-TabDetails),  
 callback?:function,  
 )`

 Promise 

Gets the badge text of the action. If no tab is specified, the non-tab-specific badge text is returned. If [displayActionCountAsBadgeText](https://developer.chrome.com/docs/extensions/reference/declarativeNetRequest/#setExtensionActionOptions) is enabled, a placeholder text will be returned unless the [declarativeNetRequestFeedback](https://developer.chrome.com/docs/extensions/declare%5Fpermissions#declarativeNetRequestFeedback) permission is present or tab-specific badge text was provided.

#### Parameters

* details  
[TabDetails](#type-TabDetails)
* callback  
function optional  
The `callback` parameter looks like: ` (result:string) => void`  
   * result  
   string

#### Returns

* Promise<string>  
Promises are supported in Manifest V3 and later, but callbacks are provided for backward compatibility. You cannot use both on the same function call. The promise resolves with the same type that is passed to the callback.

### getBadgeTextColor

` chrome.action.getBadgeTextColor(  
 details:[TabDetails](#type-TabDetails),  
 callback?:function,  
 )`

 Promise  Chrome 110+ 

Gets the text color of the action.

#### Parameters

* details  
[TabDetails](#type-TabDetails)
* callback  
function optional  
The `callback` parameter looks like: ` (result:[ColorArray](../browserAction/#type-ColorArray)) => void`  
   * result  
   [ColorArray](../browserAction/#type-ColorArray)

#### Returns

* Promise<[browserAction.ColorArray](../browserAction/#type-ColorArray)\>  
Promises are supported in Manifest V3 and later, but callbacks are provided for backward compatibility. You cannot use both on the same function call. The promise resolves with the same type that is passed to the callback.

### getPopup

` chrome.action.getPopup(  
 details:[TabDetails](#type-TabDetails),  
 callback?:function,  
 )`

 Promise 

Gets the html document set as the popup for this action.

#### Parameters

* details  
[TabDetails](#type-TabDetails)
* callback  
function optional  
The `callback` parameter looks like: ` (result:string) => void`  
   * result  
   string

#### Returns

* Promise<string>  
Promises are supported in Manifest V3 and later, but callbacks are provided for backward compatibility. You cannot use both on the same function call. The promise resolves with the same type that is passed to the callback.

### getTitle

` chrome.action.getTitle(  
 details:[TabDetails](#type-TabDetails),  
 callback?:function,  
 )`

 Promise 

Gets the title of the action.

#### Parameters

* details  
[TabDetails](#type-TabDetails)
* callback  
function optional  
The `callback` parameter looks like: ` (result:string) => void`  
   * result  
   string

#### Returns

* Promise<string>  
Promises are supported in Manifest V3 and later, but callbacks are provided for backward compatibility. You cannot use both on the same function call. The promise resolves with the same type that is passed to the callback.

### getUserSettings

` chrome.action.getUserSettings(  
 callback?:function,  
 )`

 Promise  Chrome 91+ 

Returns the user-specified settings relating to an extension's action.

#### Parameters

* callback  
function optional  
The `callback` parameter looks like: ` (userSettings:[UserSettings](#type-UserSettings)) => void`  
   * userSettings  
   [UserSettings](#type-UserSettings)

#### Returns

* Promise<[UserSettings](#type-UserSettings)\>  
Promises are supported in Manifest V3 and later, but callbacks are provided for backward compatibility. You cannot use both on the same function call. The promise resolves with the same type that is passed to the callback.

### isEnabled

` chrome.action.isEnabled(  
 tabId?:number,  
 callback?:function,  
 )`

 Promise  Chrome 110+ 

Indicates whether the extension action is enabled for a tab (or globally if no `tabId` is provided). Actions enabled using only [declarativeContent](../declarativeContent/) always return false.

#### Parameters

* tabId  
number optional  
The id of the tab for which you want check enabled status.
* callback  
function optional  
The `callback` parameter looks like: ` (isEnabled:boolean) => void`  
   * isEnabled  
   boolean  
   True if the extension action is enabled.

#### Returns

* Promise<boolean>  
Promises are supported in Manifest V3 and later, but callbacks are provided for backward compatibility. You cannot use both on the same function call. The promise resolves with the same type that is passed to the callback.

### openPopup

` chrome.action.openPopup(  
 options?:[OpenPopupOptions](#type-OpenPopupOptions),  
 callback?:function,  
 )`

 Promise  Dev channel 

Opens the extension's popup.

#### Parameters

* options  
[OpenPopupOptions](#type-OpenPopupOptions) optional  
Specifies options for opening the popup.
* callback  
function optional  
The `callback` parameter looks like: ` () => void`

#### Returns

* Promise<void>  
Promises are supported in Manifest V3 and later, but callbacks are provided for backward compatibility. You cannot use both on the same function call. The promise resolves with the same type that is passed to the callback.

### setBadgeBackgroundColor

` chrome.action.setBadgeBackgroundColor(  
 details:object,  
 callback?:function,  
 )`

 Promise 

Sets the background color for the badge.

#### Parameters

* details  
object  
   * color  
   string | [ColorArray](../browserAction/#type-ColorArray)  
   An array of four integers in the range \[0,255\] that make up the RGBA color of the badge. For example, opaque red is `[255, 0, 0, 255]`. Can also be a string with a CSS value, with opaque red being `#FF0000` or `#F00`.  
   * tabId  
   number optional  
   Limits the change to when a particular tab is selected. Automatically resets when the tab is closed.
* callback  
function optional  
The `callback` parameter looks like: ` () => void`

#### Returns

* Promise<void>  
Promises are supported in Manifest V3 and later, but callbacks are provided for backward compatibility. You cannot use both on the same function call. The promise resolves with the same type that is passed to the callback.

### setBadgeText

` chrome.action.setBadgeText(  
 details:object,  
 callback?:function,  
 )`

 Promise 

Sets the badge text for the action. The badge is displayed on top of the icon.

#### Parameters

* details  
object  
   * tabId  
   number optional  
   Limits the change to when a particular tab is selected. Automatically resets when the tab is closed.  
   * text  
   string  
   Any number of characters can be passed, but only about four can fit in the space.
* callback  
function optional  
The `callback` parameter looks like: ` () => void`

#### Returns

* Promise<void>  
Promises are supported in Manifest V3 and later, but callbacks are provided for backward compatibility. You cannot use both on the same function call. The promise resolves with the same type that is passed to the callback.

### setBadgeTextColor

` chrome.action.setBadgeTextColor(  
 details:object,  
 callback?:function,  
 )`

 Promise  Chrome 110+ 

Sets the text color for the badge.

#### Parameters

* details  
object  
   * color  
   string | [ColorArray](../browserAction/#type-ColorArray)  
   An array of four integers in the range \[0,255\] that make up the RGBA color of the badge. For example, opaque red is `[255, 0, 0, 255]`. Can also be a string with a CSS value, with opaque red being `#FF0000` or `#F00`. Not setting this value will cause a color to be automatically chosen that will contrast with the badge's background color so the text will be visible. Colors with alpha values equivalent to 0 will not be set and will return an error.  
   * tabId  
   number optional  
   Limits the change to when a particular tab is selected. Automatically resets when the tab is closed.
* callback  
function optional  
The `callback` parameter looks like: ` () => void`

#### Returns

* Promise<void>  
Promises are supported in Manifest V3 and later, but callbacks are provided for backward compatibility. You cannot use both on the same function call. The promise resolves with the same type that is passed to the callback.

### setIcon

` chrome.action.setIcon(  
 details:object,  
 callback?:function,  
 )`

 Promise 

Sets the icon for the action. The icon can be specified either as the path to an image file or as the pixel data from a canvas element, or as dictionary of either one of those. Either the **path** or the **imageData** property must be specified.

#### Parameters

* details  
object  
   * imageData  
   ImageData | object optional  
   Either an ImageData object or a dictionary {size -> ImageData} representing icon to be set. If the icon is specified as a dictionary, the actual image to be used is chosen depending on screen's pixel density. If the number of image pixels that fit into one screen space unit equals `scale`, then image with size `scale` \* n will be selected, where n is the size of the icon in the UI. At least one image must be specified. Note that 'details.imageData = foo' is equivalent to 'details.imageData = {'16': foo}'  
   * path  
   string | object optional  
   Either a relative image path or a dictionary {size -> relative image path} pointing to icon to be set. If the icon is specified as a dictionary, the actual image to be used is chosen depending on screen's pixel density. If the number of image pixels that fit into one screen space unit equals `scale`, then image with size `scale` \* n will be selected, where n is the size of the icon in the UI. At least one image must be specified. Note that 'details.path = foo' is equivalent to 'details.path = {'16': foo}'  
   * tabId  
   number optional  
   Limits the change to when a particular tab is selected. Automatically resets when the tab is closed.
* callback  
function optional  
The `callback` parameter looks like: ` () => void`

#### Returns

* Promise<void>  
 Chrome 96+  
Promises are supported in Manifest V3 and later, but callbacks are provided for backward compatibility. You cannot use both on the same function call. The promise resolves with the same type that is passed to the callback.

### setPopup

` chrome.action.setPopup(  
 details:object,  
 callback?:function,  
 )`

 Promise 

Sets the HTML document to be opened as a popup when the user clicks on the action's icon.

#### Parameters

* details  
object  
   * popup  
   string  
   The relative path to the HTML file to show in a popup. If set to the empty string (`''`), no popup is shown.  
   * tabId  
   number optional  
   Limits the change to when a particular tab is selected. Automatically resets when the tab is closed.
* callback  
function optional  
The `callback` parameter looks like: ` () => void`

#### Returns

* Promise<void>  
Promises are supported in Manifest V3 and later, but callbacks are provided for backward compatibility. You cannot use both on the same function call. The promise resolves with the same type that is passed to the callback.

### setTitle

` chrome.action.setTitle(  
 details:object,  
 callback?:function,  
 )`

 Promise 

Sets the title of the action. This shows up in the tooltip.

#### Parameters

* details  
object  
   * tabId  
   number optional  
   Limits the change to when a particular tab is selected. Automatically resets when the tab is closed.  
   * title  
   string  
   The string the action should display when moused over.
* callback  
function optional  
The `callback` parameter looks like: ` () => void`

#### Returns

* Promise<void>  
Promises are supported in Manifest V3 and later, but callbacks are provided for backward compatibility. You cannot use both on the same function call. The promise resolves with the same type that is passed to the callback.

## Events

### onClicked

` chrome.action.onClicked.addListener(  
 callback:function,  
 )`

Fired when an action icon is clicked. This event will not fire if the action has a popup.

#### Parameters

* callback  
function  
The `callback` parameter looks like: ` (tab:[tabs.Tab](../tabs/#type-Tab)) => void`  
   * tab  
   [tabs.Tab](../tabs/#type-Tab)

Table of contents

* [Manifest](#manifest)
* [Parts of the UI](#parts-of-the-ui)  
   * [Icon](#icon)  
   * [Tooltip (title)](#tooltip-title)  
   * [Badge](#badge)  
   * [Popup](#popup)
* [Per-tab state](#per-tab-state)
* [Enabled state](#enabled-state)
* [Examples](#examples)  
   * [Show a popup](#show-a-popup)  
   * [Injecting a content script on click](#injecting-a-content-script-on-click)  
   * [Emulating pageActions with declarativeContent](#emulating-pageactions-with-declarativecontent)
* [Types](#type)  
   * [OpenPopupOptions](#type-OpenPopupOptions)  
   * [TabDetails](#type-TabDetails)  
   * [UserSettings](#type-UserSettings)
* [Methods](#method)  
   * [disable](#method-disable)  
   * [enable](#method-enable)  
   * [getBadgeBackgroundColor](#method-getBadgeBackgroundColor)  
   * [getBadgeText](#method-getBadgeText)  
   * [getBadgeTextColor](#method-getBadgeTextColor)  
   * [getPopup](#method-getPopup)  
   * [getTitle](#method-getTitle)  
   * [getUserSettings](#method-getUserSettings)  
   * [isEnabled](#method-isEnabled)  
   * [openPopup](#method-openPopup)  
   * [setBadgeBackgroundColor](#method-setBadgeBackgroundColor)  
   * [setBadgeText](#method-setBadgeText)  
   * [setBadgeTextColor](#method-setBadgeTextColor)  
   * [setIcon](#method-setIcon)  
   * [setPopup](#method-setPopup)  
   * [setTitle](#method-setTitle)
* [Events](#event)  
   * [onClicked](#event-onClicked)

Follow us

[ ](https://www.youtube.com/user/ChromeDevelopers)[ ](https://twitter.com/ChromiumDev)

Contribute

* [ File a bug ](https://github.com/GoogleChrome/developer.chrome.com/issues/new?assignees=&labels=bug&template=bug%5Freport.md&title=)
* [ View source ](https://github.com/GoogleChrome/developer.chrome.com/)

Related content

* [ web.dev ](https://web.dev/)
* [ Case studies ](https://web.dev/tags/case-study/)
* [ Podcasts ](https://web.dev/podcasts/)

Connect

* [ Twitter ](https://twitter.com/chromiumdev/)
* [ YouTube ](https://www.youtube.com/user/ChromeDevelopers)
* [ GitHub ](https://github.com/googlechrome)

[Chrome](https://www.google.com/chrome/) [Firebase](https://firebase.google.com) [All products](https://developers.google.com/products) [Privacy](https://policies.google.com/privacy) [Terms](https://policies.google.com/terms)

 Choose language  ENGLISH (en) 

Content available under the CC-BY-SA-4.0 license

We serve cookies on this site to analyze traffic, remember your preferences, and optimize your experience.

[ More details ](https://policies.google.com/technologies/cookies)Ok, Got it.